@using KeyboardVN.Models
@{
    User user = ViewBag.user;
    List<CartItem> cartItems = ViewBag.cartItems;
}
<div class="container-fluid">
    <form asp-action="CreateOrder" method="POST">
        <div class="row px-xl-5">
            <div class="col-lg-8">
                <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Billing Address</span></h5>
                <div class="bg-light p-30 mb-5">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label>First Name</label>
                            <input name="firstName" class="form-control" type="text" placeholder="First Name" value="@user.FirstName" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>Last Name</label>
                            <input name="lastName" class="form-control" type="text" placeholder="Last Name" value="@user.LastName" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>Street</label>
                            <input name="street" class="form-control" type="text" placeholder="Street" value="@user.Street" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>City</label>
                            <input name="city" class="form-control" type="text" placeholder="City" value="@user.City" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>Province</label>
                            <input name="province" class="form-control" type="text" placeholder="Province" value="@user.Province" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>Country</label>
                            <input name="country" class="form-control" type="text" placeholder="Country" value="@user.Country" pattern="^[0-9A-ZÀÁẠẢÃÂẦẤẬẨẪĂẰẮẶẲẴÈÉẸẺẼÊỀẾỆỂỄÌÍỊỈĨÒÓỌỎÕÔỒỐỘỔỖƠỜỚỢỞỠÙÚỤỦŨƯỪỨỰỬỮỲÝỴỶỸĐa-zàáạảãâầấậẩẫăằắặẳẵèéẹẻẽêềếệểễìíịỉĩòóọỏõôồốộổỗơờớợởỡùúụủũưừứựửữỳýỵỷỹđ., ]+$" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>E-mail</label>
                            <input name="email" class="form-control" type="email" placeholder="example@email.com" value="@user.Email" pattern="[a-zA-Z0-9._%+-]+@@[a-zA-Z0-9.-]+@@[a-zA-Z]{2,}" required>
                        </div>
                        <div class="col-md-6 form-group">
                            <label>Mobile No</label>
                            <input name="phone" class="form-control" type="tel" placeholder="123 456 7890" value="@user.PhoneNumber" pattern="^0[0-9]{9}$" required>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Order Total</span></h5>
                <div class="bg-light p-30 mb-5">
                    <div class="border-bottom">
                        <h6 class="mb-3">Products</h6>
                        @{
                            double? subtotal = 0;
                        }
                        @foreach(CartItem item in cartItems)
                        {
                            <div class="d-flex justify-content-between">
                                <p style="width: 60%">@item.Product.Name</p>
                                <p>@((item.Product.Price - item.Product.Discount) * item.Quantity)$</p>
                                @{
                                    subtotal += (item.Product.Price - item.Product.Discount) * item.Quantity;
                                }
                            </div>
                        }
                    </div>
                    <div class="border-bottom pt-3 pb-2">
                        <div class="d-flex justify-content-between mb-3">
                            <h6>Subtotal</h6>
                            <h6>
                                @Math.Round((decimal) (subtotal), 1)$
                            </h6>
                        </div>
                        <div class="d-flex justify-content-between mb-3">
                            <h6>Shipping</h6>
                            <h6>
                                @Math.Round((decimal) (subtotal * 0.1), 1)$
                            </h6>
                        </div>
                    </div>
                    <div class="pt-2">
                        <div class="d-flex justify-content-between mt-2">
                            <h4>Total</h4>
                            <h4>
                                @Math.Round((decimal) (subtotal * 1.1), 1)$
                            </h4>
                        </div>
                    </div>
                </div>
                <div class="mb-5">
                    <h5 class="section-title position-relative text-uppercase mb-3"><span class="bg-secondary pr-3">Payment</span></h5>
                    <div class="bg-light p-30">
                        <div class="form-group">
                            <div class="custom-control custom-radio" data-toggle="collapse" data-target="#creditCard-info.show">
                                <input type="radio" class="custom-control-input" name="payment" id="cod" checked>
                                <label class="custom-control-label" for="cod">Cash On Delivery</label>
                            </div>
                        </div>
                        <input type="submit" id="place-order-btn" class="btn btn-block btn-primary font-weight-bold py-3" value="Place Order" />
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>